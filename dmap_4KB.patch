205a206,207
> static u_int64_t 	DMPTphys;       //xdong
> 
479a482,483
> 	DMPTphys = allocpages(firstaddr, NPDEPG * ndmpdp); //xdong
> 
515a520,528
> 	
> 	//xdong ->
> 
> 
>         for (i = 0; i < NPTEPG * NPDEPG * ndmpdp; i++) {
> 		((pt_entry_t *)DMPTphys)[i] = i << PAGE_SHIFT;
> 		((pt_entry_t *)DMPTphys)[i] |= PG_RW | PG_V | PG_G;
> 	}
> 
517c530,531
< 		((pd_entry_t *)DMPDphys)[j] = (vm_paddr_t)i << PDRSHIFT;
---
> 		((pd_entry_t *)DMPDphys)[j] = DMPTphys + (vm_paddr_t)j << PAGE_SHIFT;
> 		//((pd_entry_t *)DMPDphys)[j] = (vm_paddr_t)i << PDRSHIFT;
519,520c533,536
< 		((pd_entry_t *)DMPDphys)[j] |= PG_RW | PG_V | PG_PS | PG_G |
< 		    PG_M | PG_A;
---
> 		((pd_entry_t *)DMPDphys)[j] |= PG_RW | PG_V 
> 			| PG_U;
> 		//	| PG_PS | PG_G |
> 		//    PG_M | PG_A;
521a538,540
> 
> 	//xdong <-
> 	
